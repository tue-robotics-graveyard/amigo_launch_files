<?xml version="1.0"?>

<launch>

    <arg name="ROBOT_REAL" default="$(optenv ROBOT_REAL false)" />
    <arg name="snapmap" default="false"/>
    <arg name="perception" default="$(optenv AMIGO_PERCEPTION true)"/>
    <arg name="nav" default="true"/>          <!-- default navigation is used -->
    <arg name="3dnav" default="$(optenv AMIGO_3DNAV true)"/>       <!-- default navigation is based on 2d (laser) information -->
    <arg name="wbc" default="false"/>         <!-- if set to true, use whole body control -->
    <arg name="env" default="$(optenv ROBOT_ENV robotics_testlab_A)"/>
    <arg name="wire_frame" default="/map"/>
    <arg name="wire_viz_frame" default="/map"/>

    <arg name="head_control" default="$(optenv AMIGO_HEAD_CONTROL head)"/>
    
	<group if="$(arg ROBOT_REAL)">
		<!-- REAL ROBOT -->

		<!-- Start all sensors -->
		<include file="$(find amigo_launch_files)/launch/sensors/sensors.launch" />	
	</group>

    <!-- PERCEPTION -->
    <include file="$(find amigo_launch_files)/launch/middleware/perception.launch">
    </include>

    <!-- LOCALIZATION -->
    <include file="$(find amigo_launch_files)/launch/middleware/localization.launch"/>

	<!-- NAVIGATION -->
	<include file="$(find amigo_launch_files)/launch/middleware/navigation.launch"/>
		
	<!-- Head control -->
	<include file="$(find amigo_launch_files)/launch/middleware/$(arg head_control).launch" />	
	
	<!-- Arm and torso planning --> 
	<include file="$(find amigo_launch_files)/launch/manipulation/manipulation.launch" />	

	<!-- Reasoner -->
 	<include file="$(find amigo_launch_files)/launch/middleware/reasoner.launch"/>

    <!-- World Model -->
 	<include file="$(find amigo_launch_files)/launch/middleware/world_model.launch">
        <arg name="wire_viz_frame" value="$(arg wire_viz_frame)"/>
        <arg name="wire_frame" value="$(arg wire_frame)"/>
    </include>

	<!-- Node to attach world model object to gripper-->
	<node pkg="obj_in_gripper" type="obj_in_gripper_pub" name="obj_in_gripper"/>
	
	<!-- Start text to speech -->
    <include file="$(find amigo_launch_files)/launch/interaction/text_to_speech.launch" />	

    <!-- Start speech recognition -->
    <include file="$(find amigo_launch_files)/launch/interaction/speech_recognition.launch" />	

    <!-- Start speech interpreter -->
    <include file="$(find amigo_launch_files)/launch/interaction/speech_interpreter.launch" />	

	<!-- Skill Server -->
    <!-- ... -->

</launch>
